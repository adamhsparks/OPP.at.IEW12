---
title: "IEW12 Presentation Graphs"
author: "A H Sparks and E M Del Ponte"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{IEW12_slides}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r}
library(hrbrthemes)
library(dplyr)
library(ggplot2)
library(gsheet)
library(magrittr)
library(tidyr)
```

# Import article evaluations

```{r}
rrpp <- gsheet2tbl(
  "https://docs.google.com/spreadsheets/d/19gXobV4oPZeWZiQJAPNIrmqpfGQtpapXWcSxaXRw1-M/edit#gid=1699540381"
)
```

# Visualise journals
```{r}
ggplot(rrpp, aes(x = abbreviation,
                fill = art_class,
                colour = art_class)) +
  geom_bar(stat = "count") +
  xlab("Journal") +
  theme(axis.text.x = element_text(angle = 45,
                                   hjust = 1)) +
    scale_fill_manual("Article\nClass",
                    values = c("#7DBCE9", 
                               "#FFB148")) +
  scale_colour_manual("Article\nClass",
                      values = c("#7DBCE9",
                                 "#FFB148")) +
  ggtitle(label = "Random sample of 200 articles in 21 plant pathology journals",
          subtitle = "2012 to 2016") +
  theme_ipsum_rc() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```


# Visualise evaluations

## Article classes

```{r}
ggplot(rrpp, aes(x = art_class,
                                  fill = molecular,
                 colour = molecular)) +
  geom_bar(stat = "count") +
  xlab("Classes") +
  theme(axis.text.x = element_text(angle = 45,
                                   hjust = 1)) +
    scale_fill_manual("Molecular",
                    values = c("#7DBCE9", 
                               "#FFB148")) +
  scale_colour_manual("Molecular",
                      values = c("#7DBCE9",
                                 "#FFB148")) +
  ggtitle("Article Classification") +
  theme_ipsum_rc()
```

## Computational methods available

Are analysis scripts and any special software used available for inspection and
reuse to reproduce the work? Readily available (3) to not mentioned (1).

```{r}
ggplot(rrpp, aes(x = comp_mthds_avail,
                 fill = art_class,
                 colour = art_class)) +
  geom_bar(stat = "count") +
  scale_fill_manual("Article Class",
                    values = c("#7DBCE9", 
                               "#FFB148")) +
  scale_colour_manual("Article Class",
                      values = c("#7DBCE9",
                                 "#FFB148")) +
  ggtitle("Computational Methods Availability") +
  xlab("Score") +
  theme_ipsum_rc()
```

## Software availability

Is the software readily available? Open source (3, good) to proprietary and \$$
(1).

```{r}
ggplot(rrpp, aes(x = software_avail,
                 fill = art_class,
                 colour = art_class)) +
  geom_bar(stat = "count") +
  scale_fill_manual("Article Class",
                    values = c("#7DBCE9", 
                               "#FFB148")) +
  scale_colour_manual("Article Class",
                      values = c("#7DBCE9",
                                 "#FFB148")) +
  ggtitle("Software Availability") +
  xlab("Score") +
  theme_ipsum_rc()
```

## Data availability

Is the data readily available from a proper archiving repository, e.g. Zenodo
or Dataverse (3) to not mentioned (1).

```{r}
ggplot(rrpp, aes(x = data_avail,
                 fill = art_class,
                 colour = art_class)) +
  geom_bar(stat = "count") +
  scale_fill_manual("Article Class",
                    values = c("#7DBCE9", 
                               "#FFB148")) +
  scale_colour_manual("Article Class",
                      values = c("#7DBCE9",
                                 "#FFB148")) +
  ggtitle("Data Availability") +
  xlab("Score") +
  theme_ipsum_rc()
```

## Software citations

Was the software used properly cited? All versions and packages cited (3) to
not described what was used (1).

```{r}
ggplot(rrpp, aes(x = software_cite,
                 fill = art_class,
                 colour = art_class)) +
  geom_bar(stat = "count") +
  scale_fill_manual("Article Class",
                    values = c("#7DBCE9", 
                               "#FFB148")) +
  scale_colour_manual("Article Class",
                      values = c("#7DBCE9",
                                 "#FFB148")) +
  ggtitle("Software Cited") +
  xlab("Score") +
  theme_ipsum_rc()
```

## Software used (cited)

What are the 10 most popular software packages used?

### Unnest the software that were used

```{r}
rrpp <- 
  rrpp %>%
  unnest(software_used = strsplit(software_used, ", "))
```

### Graph the software that were used

```{r}
tab <- table(rrpp$software_used)
tab_s <- sort(tab)
top10 <- tail(names(tab_s), 17) # checking the table, there are several ties
top_software <- subset(rrpp, software_used %in% top10)
top_software$software_used <- factor(top_software$software_used,
                                     levels = rev(top10))


ggplot(top_software, aes(x = software_used,
                         fill = art_class,
                         colour = art_class)) +
  geom_bar(stat = "count") +
  ggtitle("Top 10 Software Used") +
  scale_fill_manual("Article Class",
                    values = c("#7DBCE9", 
                               "#FFB148")) +
  scale_colour_manual("Article Class",
                      values = c("#7DBCE9",
                                 "#FFB148")) +
  xlab("Software") +
  ylab("Count") +
  theme_ipsum_rc() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```
